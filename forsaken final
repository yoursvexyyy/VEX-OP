-- UpdateNoticeGui.lua
-- Place as a LocalScript (e.g., inside StarterGui) or run to create the GUI at runtime.
-- Replace the invite below with your server's invite.

local DISCORD_INVITE = "https://discord.com/invite/FvMePtyJrq" -- <<--- change this
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- BUILD GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "UpdateNoticeGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local bgFrame = Instance.new("Frame")
bgFrame.Name = "Background"
bgFrame.AnchorPoint = Vector2.new(0.5, 0.5)
bgFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
bgFrame.Size = UDim2.new(0.6, 0, 0.32, 0)
bgFrame.BackgroundColor3 = Color3.fromRGB(0,0,0)
bgFrame.BackgroundTransparency = 0 -- fully black
bgFrame.BorderSizePixel = 0
bgFrame.Parent = screenGui

-- Slight rounded look (optional - works with newer Roblox UI)
local uicorner = Instance.new("UICorner", bgFrame)
uicorner.CornerRadius = UDim.new(0, 10)

local title = Instance.new("TextLabel")
title.Name = "Title"
title.Parent = bgFrame
title.AnchorPoint = Vector2.new(0.5, 0)
title.Position = UDim2.new(0.5, 0, 0.08, 0)
title.Size = UDim2.new(0.92, 0, 0.28, 0)
title.BackgroundTransparency = 1
title.Text = "THIS SCRIPT IS OUTDATED!"
title.Font = Enum.Font.GothamBold
title.TextScaled = true
title.TextColor3 = Color3.fromRGB(255,255,255)
title.TextStrokeTransparency = 0.8

local message = Instance.new("TextLabel")
message.Name = "Message"
message.Parent = bgFrame
message.AnchorPoint = Vector2.new(0.5, 0)
message.Position = UDim2.new(0.5, 0, 0.32, 0)
message.Size = UDim2.new(0.92, 0, 0.28, 0)
message.BackgroundTransparency = 1
message.Text = "Please get the latest version from the Discord server."
message.Font = Enum.Font.Gotham
message.TextWrapped = true
message.TextScaled = true
message.TextColor3 = Color3.fromRGB(200,200,200)
message.TextStrokeTransparency = 0.9

-- Notification Label
local notif = Instance.new("TextLabel")
notif.Name = "CopyNotification"
notif.Parent = bgFrame
notif.AnchorPoint = Vector2.new(0.5, 0)
notif.Position = UDim2.new(0.5, 0, 1.1, 0) -- below the button
notif.Size = UDim2.new(0.9, 0, 0.15, 0)
notif.BackgroundTransparency = 1
notif.Text = ""
notif.Font = Enum.Font.GothamSemibold
notif.TextScaled = true
notif.TextColor3 = Color3.fromRGB(255, 255, 255)
notif.Visible = false

local copyBtn = Instance.new("TextButton")
copyBtn.Name = "CopyInviteButton"
copyBtn.Parent = bgFrame
copyBtn.AnchorPoint = Vector2.new(0.5, 0)
copyBtn.Position = UDim2.new(0.5, 0, 0.66, 0)
copyBtn.Size = UDim2.new(0.6, 0, 0.22, 0)
copyBtn.BackgroundColor3 = Color3.fromRGB(34, 197, 94)
copyBtn.BorderSizePixel = 0
copyBtn.Font = Enum.Font.GothamSemibold
copyBtn.Text = "Copy Discord Invite"
copyBtn.TextScaled = true
copyBtn.TextColor3 = Color3.fromRGB(255,255,255)

local btnCorner = Instance.new("UICorner", copyBtn)
btnCorner.CornerRadius = UDim.new(0, 6)

-- Fallback TextBox (hidden until needed)
local tb = Instance.new("TextBox")
tb.Name = "InviteBox"
tb.Parent = bgFrame
tb.AnchorPoint = Vector2.new(0.5, 0)
tb.Position = UDim2.new(0.5, 0, 0.9, 0)
tb.Size = UDim2.new(0.86, 0, 0.14, 0)
tb.BackgroundColor3 = Color3.fromRGB(24,24,24)
tb.BorderSizePixel = 0
tb.Text = DISCORD_INVITE
tb.ClearTextOnFocus = false
tb.Visible = false
tb.TextScaled = false
tb.Font = Enum.Font.Gotham
tb.TextColor3 = Color3.fromRGB(220,220,220)
tb.TextXAlignment = Enum.TextXAlignment.Center
local tbCorner = Instance.new("UICorner", tb)
tbCorner.CornerRadius = UDim.new(0, 6)

-- Close button (top-right)
local closeBtn = Instance.new("TextButton")
closeBtn.Name = "Close"
closeBtn.Parent = bgFrame
closeBtn.AnchorPoint = Vector2.new(1, 0)
closeBtn.Position = UDim2.new(0.98, 0, 0.02, 0)
closeBtn.Size = UDim2.new(0.06, 0, 0.14, 0)
closeBtn.BackgroundTransparency = 1
closeBtn.Text = "✕"
closeBtn.Font = Enum.Font.SourceSansBold
closeBtn.TextScaled = true
closeBtn.TextColor3 = Color3.fromRGB(180,180,180)

-- Button behaviors
copyBtn.MouseButton1Click:Connect(function()
    -- Try to use setclipboard (common in executor environments)
    local ok, err = pcall(function()
        if setclipboard then
            setclipboard(DISCORD_INVITE)
        else
            error("no setclipboard")
        end
    end)

    if ok then
        copyBtn.Text = "Copied!"
        notif.Visible = true
        notif.Text = "Invite copied! Please paste it in your browser to join."

        -- restore text + hide notif after 3 seconds
        delay(3, function()
            if copyBtn and copyBtn.Parent then
                copyBtn.Text = "Copy Discord Invite"
            end
            if notif and notif.Parent then
                notif.Visible = false
            end
        end)

    else
        -- Fallback: show textbox with invite selected so user can copy manually
        tb.Visible = true
        tb.Text = DISCORD_INVITE
        tb:CaptureFocus()

        pcall(function()
            if tb:IsA("TextBox") then
                tb.SelectionStart = 1
                tb.SelectionLength = #DISCORD_INVITE
            end
        end)

        copyBtn.Text = "Invite shown — copy manually"
        notif.Visible = true
        notif.Text = "Copy this invite manually and paste it in your browser."

        delay(3, function()
            if copyBtn and copyBtn.Parent then
                copyBtn.Text = "Copy Discord Invite"
            end
            if notif and notif.Parent then
                notif.Visible = false
            end
        end)
    end
end)


closeBtn.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- Optional: make the GUI draggable by player (simple)
local drag = false
local dragStart = nil
local startPos = nil

bgFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        drag = true
        dragStart = input.Position
        startPos = bgFrame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                drag = false
            end
        end)
    end
end)

bgFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement and drag and dragStart and startPos then
        local delta = input.Position - dragStart
        bgFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)
